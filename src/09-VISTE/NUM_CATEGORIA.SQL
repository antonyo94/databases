--VISTA 4
--Vista che ricapitola in manieraa generale la suddivisione delle squadre ordinandole per eta e per categoria,mostrando il rispettivo mister ed
--il numero di allievi che la compongono
CREATE OR REPLACE VIEW NUM_CATEGORIA AS
SELECT S.CATEGORIA_S AS CATEGORIA,S.ETA_S AS ETA,M.NOME_M AS NOME_MISTER,M.COGNOME_M AS COGNOME_MISTER,COUNT(*) AS ALLIEVI
FROM GIOCA_IN G,SQUADRA S,MISTER M
WHERE G.CATEGORIA_S_GIOCA=S.CATEGORIA_S AND G.ETA_S_GIOCA=S.ETA_S AND S.N_PATENTINO_SQUADRA=M.N_PATENTINO
GROUP BY S.CATEGORIA_S,S.ETA_S,M.NOME_M,M.COGNOME_M
ORDER BY S.ETA_S,S.CATEGORIA_S