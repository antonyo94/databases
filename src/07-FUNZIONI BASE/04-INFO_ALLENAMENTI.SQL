--FUNZIONE DI BASE 4 
--Pocedura che permette di mostrare a video tutti gli allenamenti ed i progressi ottenuti da un allievo
CREATE OR REPLACE PROCEDURE INFO_ALLENAMENTI(NUM_TESSERA CHAR) IS
CURSOR POINT IS
SELECT NOME_A,COGNOME_A,DATA_ALL_SOSTIENE,RUOLO_SOSTIENE,VOTO_SOSTIENE
FROM ALLIEVO A,SOSTIENE S
WHERE A.N_TESSERINO=NUM_TESSERA AND A.N_TESSERINO=S.N_TESSERINO_SOSTIENE;
CUR_VAR POINT%ROWTYPE;

BEGIN 
OPEN POINT;
LOOP 
FETCH POINT INTO CUR_VAR;
EXIT WHEN POINT%NOTFOUND;
DBMS_OUTPUT.PUT_LINE(CUR_VAR.NOME_A || ' ' || CUR_VAR.COGNOME_A || ' ' || CUR_VAR.DATA_ALL_SOSTIENE || ' ' || CUR_VAR.RUOLO_SOSTIENE ||'-' || CUR_VAR.VOTO_SOSTIENE);

END LOOP;
CLOSE POINT;

EXCEPTION
WHEN NO_DATA_FOUND THEN RAISE_APPLICATION_ERROR(-20300,'Tale allievo non e presente agli allenamenti');
END;

